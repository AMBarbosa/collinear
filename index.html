<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="System for seamless management of multicollinearity in data frames
    with numeric and/or categorical variables for statistical analysis and 
    machine learning modeling. The package combines bivariate correlation 
    (Pearson, Spearman, and Cramer's V) with variance inflation factor analysis, 
    target encoding to transform categorical variables into numeric (Micci-Barreca, D. 2001 
    &lt;DOI:10.1145/507533.507538&gt;), and a flexible 
    feature prioritization method, to deliver a comprehensive 
    multicollinearity management tool covering a wide range of use cases.">
<title>Seamless Multicollinearity Management for Categorical and Numeric Variables • collinear</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Seamless Multicollinearity Management for Categorical and Numeric Variables">
<meta property="og:description" content="System for seamless management of multicollinearity in data frames
    with numeric and/or categorical variables for statistical analysis and 
    machine learning modeling. The package combines bivariate correlation 
    (Pearson, Spearman, and Cramer's V) with variance inflation factor analysis, 
    target encoding to transform categorical variables into numeric (Micci-Barreca, D. 2001 
    &lt;DOI:10.1145/507533.507538&gt;), and a flexible 
    feature prioritization method, to deliver a comprehensive 
    multicollinearity management tool covering a wide range of use cases.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">collinear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p>collinear: seamless multicollinearity management for numeric and categorical variables ================</p>
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#citation">Citation</a></li>
<li><a href="#install">Install</a></li>
<li>
<a href="#multicollinearity-management-with-the-collinear-package">Multicollinearity management with the <code>collinear</code> package.</a>
<ul>
<li><a href="#example-data">Example data</a></li>
<li><a href="#collinear"><code>collinear()</code></a></li>
<li><a href="#cor_select-and-vif_select"><code>cor_select()</code> and <code>vif_select()</code></a></li>
<li><a href="#target_encoding_lab"><code>target_encoding_lab()</code></a></li>
</ul>
</li>
</ul>
<!-- Development badges 
&#10;[![R-CMD-check](https://github.com/BlasBenito/collinear/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/BlasBenito/collinear/actions/workflows/R-CMD-check.yaml)
[![Devel-version](https://img.shields.io/badge/devel%20version-1.0.1-blue.svg)](https://github.com/blasbenito/collinear)
[![DOI](https://zenodo.org/badge/330962704.svg)](https://zenodo.org/badge/latestdoi/330962704)
[![lifecycle](https://img.shields.io/badge/lifecycle-stable-green.svg)](https://lifecycle.r-lib.org/articles/stages.html)
&#10;<!-- Released version badges --><p><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" class="external-link"><img src="https://img.shields.io/badge/license-GPL--3-blue.svg" alt="License"></a><a href="https://github.com/BlasBenito/collinear/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/BlasBenito/collinear/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://cran.r-project.org/package=collinear" class="external-link"><img src="https://www.r-pkg.org/badges/version/collinear" alt="CRAN status"></a><a href="https://CRAN.R-project.org/package=collinear" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/collinear" alt="CRAN_Download_Badge"></a></p>
<div class="section level1">
<div class="page-header"><h1 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h1></div>
<p>The R package <code>collinear</code> combines four different methods to offer a comprehensive tool for multicollinearity management:</p>
<ul>
<li>
<strong>Bivariate correlation for numeric and categorical predictors</strong>: Pearson and Spearman correlation methods for pairs of numeric predictors, and Cramer’s V for pairs of categorical predictors.</li>
<li>
<strong>Variance Inflation Factor analysis (VIF)</strong>: to identify predictors that are linear combinations of other predictors.</li>
<li>
<strong>Target encoding of categorical predictors</strong>: to convert them to numeric using a numeric variable as response (usually a response variable) and handle them as numerics during the multicollinearity filtering</li>
<li>
<strong>Flexible feature prioritization</strong>: allows defining the order of importance for the predictors based on specific analytic needs.</li>
</ul>
<p>These methods are integrated in the <code><a href="reference/collinear.html">collinear()</a></code> function, which returns a vector of selected predictors with a controlled multicollinearity.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>, <span class="co">#your data frame</span></span>
<span>  <span class="va">response</span>, <span class="co">#name of your response variable</span></span>
<span>  <span class="va">predictors</span>, <span class="co">#names of your predictors,</span></span>
<span>  <span class="va">preference_order</span>, <span class="co">#your predictors in order of interest</span></span>
<span>  <span class="va">max_cor</span>, <span class="co">#maximum bivariate correlation</span></span>
<span>  <span class="va">max_vif</span>, <span class="co">#maximum variance inflation factor</span></span>
<span>  <span class="va">encoding_method</span>, <span class="co">#method to convert categorical predictors into numerics</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The package contains other functions that may be useful during multicollinearity management: + <code><a href="reference/cor_select.html">cor_select()</a></code>: like <code><a href="reference/collinear.html">collinear()</a></code>, but only using pairwise correlations. + <code><a href="reference/vif_select.html">vif_select()</a></code>: like <code><a href="reference/collinear.html">collinear()</a></code>, but only using variance inflation factors. + <code><a href="reference/preference_order.html">preference_order()</a></code>: to compute preference order based on univariate models. + <code><a href="reference/target_encoding_lab.html">target_encoding_lab()</a></code>: to convert categorical predictors into numeric using several methods. + <code><a href="reference/cor_df.html">cor_df()</a></code>: to generate a data frame with all pairwise correlation scores. + <code><a href="reference/cor_matrix.html">cor_matrix()</a></code>: to convert a correlation data frame into matrix, or obtain a correlation matrix. + <code><a href="reference/vif_df.html">vif_df()</a></code>: to obtain a data frame with all variance inflation factors.</p>
</div>
<div class="section level1">
<h1 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h1>
<p>If you found this package useful during your research work, please cite it as:</p>
<p><em>Blas M. Benito (2023). collinear: seamless multicollinearity management for numeric and categorical variables. R package version 1.0.0.</em></p>
</div>
<div class="section level1">
<h1 id="install">Install<a class="anchor" aria-label="anchor" href="#install"></a>
</h1>
<p>The package <code>collinear</code> can be installed from CRAN.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"collinear"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Installing package into '/home/blas/R/x86_64-pc-linux-gnu-library/4.3'</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="do">## (as 'lib' is unspecified)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blasbenito.github.io/collinear/">collinear</a></span><span class="op">)</span></span></code></pre></div>
<p>Three are no big development plans for this package, but still, latest bug fixes and features will surely be in the development version.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span></span>
<span>  repo <span class="op">=</span> <span class="st">"blasbenito/collinear"</span>, </span>
<span>  ref <span class="op">=</span> <span class="st">"development"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="multicollinearity-management-with-the-collinear-package">Multicollinearity management with the <code>collinear</code> package.<a class="anchor" aria-label="anchor" href="#multicollinearity-management-with-the-collinear-package"></a>
</h1>
<p>This section shows the basic usage of the package and offers a brief explanation on the methods used within.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://blasbenito.github.io/collinear/">collinear</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jabiru/tictoc" class="external-link">tictoc</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h2>
<p>The package is shipped with a data frame named <code>vi</code>, with 30.000 records, and 67 columns with a mixture of types.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">vi</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 30,000</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 67</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $ longitude                  &lt;dbl&gt; -114.254306, 114.845693, -122.145972, 108.3…</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $ latitude                   &lt;dbl&gt; 45.0540272, 26.2706940, 56.3790272, 29.9456…</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $ vi_mean                    &lt;dbl&gt; 0.38, 0.53, 0.45, 0.69, 0.42, 0.68, 0.70, 0…</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $ vi_max                     &lt;dbl&gt; 0.57, 0.67, 0.65, 0.85, 0.64, 0.78, 0.77, 0…</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $ vi_min                     &lt;dbl&gt; 0.12, 0.41, 0.25, 0.50, 0.25, 0.48, 0.60, 0…</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $ vi_range                   &lt;dbl&gt; 0.45, 0.26, 0.40, 0.34, 0.39, 0.31, 0.17, 0…</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $ koppen_zone                &lt;chr&gt; "BSk", "Cfa", "Dfc", "Cfb", "Aw", "Cfa", "A…</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ koppen_group               &lt;chr&gt; "Arid", "Temperate", "Cold", "Temperate", "…</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ koppen_description         &lt;chr&gt; "steppe, cold", "no dry season, hot summer"…</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_type                  &lt;chr&gt; "Cambisols", "Acrisols", "Luvisols", "Aliso…</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_slope                 &lt;int&gt; 6, 2, 0, 10, 0, 10, 6, 0, 2, 0, 0, 1, 0, 1,…</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_diversity             &lt;int&gt; 29, 24, 21, 25, 19, 30, 26, 20, 26, 22, 25,…</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_elevation             &lt;int&gt; 1821, 143, 765, 1474, 378, 485, 604, 1159, …</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_mean                   &lt;dbl&gt; 27.5, 56.1, 41.4, 59.3, 37.4, 56.3, 52.3, 2…</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_max                    &lt;dbl&gt; 62.9, 74.4, 81.9, 81.1, 83.2, 73.8, 55.8, 3…</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_min                    &lt;dbl&gt; 24.5, 33.3, 42.2, 31.3, 8.3, 28.8, 25.3, 11…</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_range                  &lt;dbl&gt; 38.4, 41.2, 39.7, 49.8, 74.9, 45.0, 30.5, 2…</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_temperature_mean      &lt;dbl&gt; 4.8, 19.9, 1.2, 13.0, 28.2, 18.1, 21.5, 23.…</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_temperature_max       &lt;dbl&gt; 29.9, 32.6, 20.4, 24.6, 41.6, 29.1, 26.4, 4…</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_temperature_min       &lt;dbl&gt; -12.4, 3.9, -16.0, -0.4, 16.8, 4.1, 17.3, 5…</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_temperature_range     &lt;dbl&gt; 42.3, 28.8, 36.4, 25.0, 24.8, 24.9, 9.1, 38…</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_sand                  &lt;int&gt; 41, 39, 27, 29, 48, 33, 30, 78, 23, 64, 54,…</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_clay                  &lt;int&gt; 20, 24, 28, 31, 27, 29, 40, 15, 26, 22, 23,…</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_silt                  &lt;int&gt; 38, 35, 43, 38, 23, 36, 29, 6, 49, 13, 22, …</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_ph                    &lt;dbl&gt; 6.5, 5.9, 5.6, 5.5, 6.5, 5.8, 5.2, 7.1, 7.3…</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_soc                   &lt;dbl&gt; 43.1, 14.6, 36.4, 34.9, 8.1, 20.8, 44.5, 4.…</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_nitrogen              &lt;dbl&gt; 2.8, 1.3, 2.9, 3.6, 1.2, 1.9, 2.8, 0.6, 3.1…</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_mean             &lt;dbl&gt; 17.634, 19.198, 13.257, 14.163, 24.512, 17.…</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_max              &lt;dbl&gt; 31.317, 24.498, 25.283, 17.237, 28.038, 22.…</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_min              &lt;dbl&gt; 5.209, 13.311, 1.587, 9.642, 19.102, 12.196…</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_range            &lt;dbl&gt; 26.108, 11.187, 23.696, 7.595, 8.936, 10.20…</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="do">## $ growing_season_length      &lt;dbl&gt; 139, 365, 164, 333, 228, 365, 365, 60, 365,…</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="do">## $ growing_season_temperature &lt;dbl&gt; 12.65, 19.35, 11.55, 12.45, 26.45, 17.75, 2…</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="do">## $ growing_season_rainfall    &lt;dbl&gt; 224.5, 1493.4, 345.4, 1765.5, 984.4, 1860.5…</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="do">## $ growing_degree_days        &lt;dbl&gt; 2140.5, 7080.9, 2053.2, 4162.9, 10036.7, 64…</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="do">## $ temperature_mean           &lt;dbl&gt; 3.65, 19.35, 1.45, 11.35, 27.55, 17.65, 22.…</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="do">## $ temperature_max            &lt;dbl&gt; 24.65, 33.35, 21.15, 23.75, 38.35, 30.55, 2…</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a><span class="do">## $ temperature_min            &lt;dbl&gt; -14.05, 3.05, -18.25, -3.55, 19.15, 2.45, 1…</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a><span class="do">## $ temperature_range          &lt;dbl&gt; 38.7, 30.3, 39.4, 27.3, 19.2, 28.1, 7.0, 29…</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="do">## $ temperature_seasonality    &lt;dbl&gt; 882.6, 786.6, 1070.9, 724.7, 219.3, 747.2, …</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_mean              &lt;int&gt; 446, 1493, 560, 1794, 990, 1860, 3150, 356,…</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_min               &lt;int&gt; 25, 37, 24, 29, 0, 60, 122, 1, 10, 12, 0, 0…</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_max               &lt;int&gt; 62, 209, 87, 293, 226, 275, 425, 62, 256, 3…</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_range             &lt;int&gt; 37, 172, 63, 264, 226, 215, 303, 61, 245, 2…</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a><span class="do">## $ evapotranspiration_mean    &lt;dbl&gt; 78.32, 105.88, 50.03, 64.65, 156.60, 108.50…</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a><span class="do">## $ evapotranspiration_max     &lt;dbl&gt; 164.70, 190.86, 117.53, 115.79, 187.71, 191…</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a><span class="do">## $ evapotranspiration_min     &lt;dbl&gt; 13.67, 50.44, 3.53, 28.01, 128.59, 51.39, 8…</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a><span class="do">## $ evapotranspiration_range   &lt;dbl&gt; 151.03, 140.42, 113.99, 87.79, 59.13, 139.9…</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cloud_cover_mean           &lt;int&gt; 31, 48, 42, 64, 38, 52, 60, 13, 53, 20, 11,…</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cloud_cover_max            &lt;int&gt; 39, 61, 49, 71, 58, 67, 77, 18, 60, 27, 23,…</span></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cloud_cover_min            &lt;int&gt; 16, 34, 33, 54, 19, 39, 45, 6, 45, 14, 2, 1…</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cloud_cover_range          &lt;int&gt; 23, 27, 15, 17, 38, 27, 32, 11, 15, 12, 21,…</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a><span class="do">## $ aridity_index              &lt;dbl&gt; 0.54, 1.27, 0.90, 2.08, 0.55, 1.67, 2.88, 0…</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a><span class="do">## $ humidity_mean              &lt;dbl&gt; 55.56, 62.14, 59.87, 69.32, 51.60, 62.76, 7…</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a><span class="do">## $ humidity_max               &lt;dbl&gt; 63.98, 65.00, 68.19, 71.90, 67.07, 65.68, 7…</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a><span class="do">## $ humidity_min               &lt;dbl&gt; 48.41, 58.97, 53.75, 67.21, 33.89, 59.92, 7…</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a><span class="do">## $ humidity_range             &lt;dbl&gt; 15.57, 6.03, 14.44, 4.69, 33.18, 5.76, 3.99…</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a><span class="do">## $ biogeo_ecoregion           &lt;chr&gt; "South Central Rockies forests", "Jian Nan …</span></span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a><span class="do">## $ biogeo_biome               &lt;chr&gt; "Temperate Conifer Forests", "Tropical &amp; Su…</span></span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a><span class="do">## $ biogeo_realm               &lt;chr&gt; "Nearctic", "Indomalayan", "Nearctic", "Pal…</span></span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_name               &lt;chr&gt; "United States of America", "China", "Canad…</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_population         &lt;dbl&gt; 313973000, 1338612970, 33487208, 1338612970…</span></span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_gdp                &lt;dbl&gt; 15094000, 7973000, 1300000, 7973000, 15860,…</span></span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_income             &lt;chr&gt; "1. High income: OECD", "3. Upper middle in…</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a><span class="do">## $ continent                  &lt;chr&gt; "North America", "Asia", "North America", "…</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a><span class="do">## $ region                     &lt;chr&gt; "Americas", "Asia", "Americas", "Asia", "Af…</span></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a><span class="do">## $ subregion                  &lt;chr&gt; "Northern America", "Eastern Asia", "Northe…</span></span></code></pre></div>
<p>The response variables are “vi_mean”, “vi_max”, “vi_min”, and “vi_range”, with statistics of a vegetation index named NDVI. The predictors are stored in the character vector <code>vi_predictors</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vi_predictors</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "koppen_zone"                "koppen_group"              </span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "koppen_description"         "soil_type"                 </span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "topo_slope"                 "topo_diversity"            </span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "topo_elevation"             "swi_mean"                  </span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "swi_max"                    "swi_min"                   </span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "swi_range"                  "soil_temperature_mean"     </span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "soil_temperature_max"       "soil_temperature_min"      </span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "soil_temperature_range"     "soil_sand"                 </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "soil_clay"                  "soil_silt"                 </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "soil_ph"                    "soil_soc"                  </span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "soil_nitrogen"              "solar_rad_mean"            </span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] "solar_rad_max"              "solar_rad_min"             </span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "solar_rad_range"            "growing_season_length"     </span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [27] "growing_season_temperature" "growing_season_rainfall"   </span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [29] "growing_degree_days"        "temperature_mean"          </span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [31] "temperature_max"            "temperature_min"           </span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [33] "temperature_range"          "temperature_seasonality"   </span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [35] "rainfall_mean"              "rainfall_min"              </span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [37] "rainfall_max"               "rainfall_range"            </span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [39] "evapotranspiration_mean"    "evapotranspiration_max"    </span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [41] "evapotranspiration_min"     "evapotranspiration_range"  </span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [43] "cloud_cover_mean"           "cloud_cover_max"           </span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [45] "cloud_cover_min"            "cloud_cover_range"         </span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [47] "aridity_index"              "humidity_mean"             </span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [49] "humidity_max"               "humidity_min"              </span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="do">## [51] "humidity_range"             "biogeo_ecoregion"          </span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [53] "biogeo_biome"               "biogeo_realm"              </span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a><span class="do">## [55] "country_name"               "country_population"        </span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a><span class="do">## [57] "country_gdp"                "country_income"            </span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="do">## [59] "continent"                  "region"                    </span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a><span class="do">## [61] "subregion"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="collinear">
<code>collinear()</code><a class="anchor" aria-label="anchor" href="#collinear"></a>
</h2>
<p>The <code><a href="reference/collinear.html">collinear()</a></code> function contains the functionality required for a robust multicollinearity management.</p>
<div class="section level3">
<h3 id="input-arguments">Input arguments<a class="anchor" aria-label="anchor" href="#input-arguments"></a>
</h3>
<p>The function takes these inputs:</p>
<ul>
<li>
<code>df</code>: a data frame with predictors, and preferably, a response (more about this later).</li>
<li>
<code>response</code>: the name of the response variable, only relevant <strong>and highly recommended</strong> if there are categorical variables within the predictors.</li>
<li>
<code>predictors</code>: names of predictors involved in the multicollinearity analysis.</li>
<li>
<code>preference_order</code>: names of the predictors in the user’s order of preference. Does not need to name all predictors in <code>predictors</code>!</li>
<li>
<code>cor_method</code>: usually “pearson”, but also “spearman” is accepted.</li>
<li>
<code>max_cor</code>: maximum correlation allowed between two predictors.</li>
<li>
<code>max_vif</code>: maximum VIF allowed in a predictor.</li>
<li>
<code>encoding_method</code>: method used to convert categorical variables into numeric. Only relevant when a <code>response</code> is provided. By default, each group of the categorical variable is encoded with the mean of the <code>response</code> across the group.</li>
</ul>
<p>The code below shows a quick example. Notice that the argument <code>preference_order</code> was left as NULL, but will be explained later.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  preference_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_cor <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  max_vif <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  encoding_method <span class="op">=</span> <span class="st">"mean"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">selected_predictors</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "country_income"             "topo_diversity"            </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "topo_slope"                 "humidity_range"            </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "topo_elevation"             "country_gdp"               </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "country_population"         "soil_soc"                  </span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "region"                     "soil_type"                 </span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "soil_clay"                  "subregion"                 </span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "biogeo_realm"               "soil_sand"                 </span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "swi_min"                    "soil_nitrogen"             </span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "swi_range"                  "cloud_cover_range"         </span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "rainfall_min"               "growing_season_temperature"</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "solar_rad_max"              "solar_rad_min"             </span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] "rainfall_range"</span></span></code></pre></div>
<p>The function has returned a list of predictors that should have a correlation lower than 0.75 with each other, and a VIF lower than 5. Let’s see if that’s true.</p>
<p>The function <code><a href="reference/cor_df.html">cor_df()</a></code> returns a data frame with pairwise correlations, arranged by the absolute value of the correlation.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_cor</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cor_df.html">cor_df</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">selected_predictors</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">selected_predictors_cor</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 3</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">##   x             y                          correlation</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;         &lt;chr&gt;                            &lt;dbl&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 solar_rad_min growing_season_temperature       0.744</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 soil_nitrogen soil_soc                         0.729</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 soil_nitrogen swi_min                          0.673</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 soil_sand     soil_clay                       -0.666</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 solar_rad_max soil_type                       -0.652</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 biogeo_realm  soil_type                        0.62</span></span></code></pre></div>
<p>The data frame above shows that the maximum correlation between two of the selected predictors is below 0.75, so here <code><a href="reference/collinear.html">collinear()</a></code> worked as expected.</p>
<p>The function <code><a href="reference/vif_df.html">vif_df()</a></code> returns a data frame with the VIF scores of all predictors.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_vif</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vif_df.html">vif_df</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">selected_predictors</span></span>
<span><span class="op">)</span></span>
<span><span class="va">selected_predictors_vif</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">##                      variable   vif</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1              country_income 1.211</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2              topo_diversity 1.635</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3                  topo_slope 1.928</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4              humidity_range 1.959</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5              topo_elevation 2.073</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6                 country_gdp 2.157</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 7          country_population 2.169</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 8                rainfall_min 2.256</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 9           cloud_cover_range 2.393</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 10             rainfall_range 2.716</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 11                   soil_soc 2.744</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 12                     region 2.846</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 13                  subregion 2.870</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 14                  soil_type 2.874</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 15                  soil_clay 2.966</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 16               biogeo_realm 3.120</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 17              solar_rad_max 3.126</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 18                    swi_min 3.138</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 19                  soil_sand 3.170</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 20                  swi_range 3.263</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 21              soil_nitrogen 3.372</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 22 growing_season_temperature 4.271</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 23              solar_rad_min 4.287</span></span></code></pre></div>
<p>The output shows that the maximum VIF is 4.2, so here <code><a href="reference/collinear.html">collinear()</a></code> did its work as expected.</p>
</div>
<div class="section level3">
<h3 id="arguments-max_cor-and-max_vif">Arguments <code>max_cor</code> and <code>max_vif</code>
<a class="anchor" aria-label="anchor" href="#arguments-max_cor-and-max_vif"></a>
</h3>
<p>The arguments <code>max_cor</code> and <code>max_vif</code> control the intensity of the multicollinearity filtering.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#restrictive setup</span></span>
<span><span class="va">selected_predictors_restrictive</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  max_cor <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  max_vif <span class="op">=</span> <span class="fl">2.5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#permissive setup</span></span>
<span><span class="va">selected_predictors_permissive</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  max_cor <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  max_vif <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>These are the variables selected under a restrictive setup:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_restrictive</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "country_income"             "soil_clay"                 </span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "country_population"         "region"                    </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "soil_soc"                   "topo_slope"                </span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "growing_season_temperature" "humidity_range"            </span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "cloud_cover_range"          "topo_elevation"</span></span></code></pre></div>
<p>These are the variables selected under a more permissive setup:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_permissive</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "country_income"             "topo_diversity"            </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "topo_slope"                 "country_population"        </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "country_gdp"                "soil_soc"                  </span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "region"                     "soil_type"                 </span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "soil_nitrogen"              "subregion"                 </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "topo_elevation"             "biogeo_realm"              </span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "koppen_group"               "biogeo_biome"              </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "country_name"               "soil_ph"                   </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "growing_season_temperature" "aridity_index"             </span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "soil_temperature_max"       "rainfall_min"              </span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "rainfall_range"             "swi_mean"                  </span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] "temperature_max"            "solar_rad_mean"            </span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "soil_clay"                  "soil_silt"                 </span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [27] "cloud_cover_min"            "swi_range"                 </span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [29] "humidity_range"</span></span></code></pre></div>
<p>As expected, the restrictive setup resulted in a smaller set of selected predictors. There are no hard rules for <code>max_cor</code> and <code>max_vif</code>, and their selection will depend on the objective of the analysis and the nature of the predictors.</p>
</div>
<div class="section level3">
<h3 id="the-response-argument">The <code>response</code> argument<a class="anchor" aria-label="anchor" href="#the-response-argument"></a>
</h3>
<p>The response argument is used to encode categorical variables as numeric. When omitted, the <code><a href="reference/collinear.html">collinear()</a></code> function ignores categorical variables. However, the function <code><a href="reference/cor_select.html">cor_select()</a></code> can help when there is not a suitable <code>response</code> variable in a data frame. This option is discussed at the end of this section.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">selected_predictors_no_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>When the argument <code>response</code> is used, the output may contain categorical predictors (tagged with <code>&lt;chr&gt;</code>, from “character” below).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">vi</span><span class="op">[</span>, <span class="va">selected_predictors_response</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 30,000</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 23</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_income             &lt;chr&gt; "1. High income: OECD", "3. Upper middle in…</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_diversity             &lt;int&gt; 29, 24, 21, 25, 19, 30, 26, 20, 26, 22, 25,…</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_slope                 &lt;int&gt; 6, 2, 0, 10, 0, 10, 6, 0, 2, 0, 0, 1, 0, 1,…</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $ humidity_range             &lt;dbl&gt; 15.57, 6.03, 14.44, 4.69, 33.18, 5.76, 3.99…</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_elevation             &lt;int&gt; 1821, 143, 765, 1474, 378, 485, 604, 1159, …</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_gdp                &lt;dbl&gt; 15094000, 7973000, 1300000, 7973000, 15860,…</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_population         &lt;dbl&gt; 313973000, 1338612970, 33487208, 1338612970…</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_soc                   &lt;dbl&gt; 43.1, 14.6, 36.4, 34.9, 8.1, 20.8, 44.5, 4.…</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ region                     &lt;chr&gt; "Americas", "Asia", "Americas", "Asia", "Af…</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_type                  &lt;chr&gt; "Cambisols", "Acrisols", "Luvisols", "Aliso…</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_clay                  &lt;int&gt; 20, 24, 28, 31, 27, 29, 40, 15, 26, 22, 23,…</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="do">## $ subregion                  &lt;chr&gt; "Northern America", "Eastern Asia", "Northe…</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="do">## $ biogeo_realm               &lt;chr&gt; "Nearctic", "Indomalayan", "Nearctic", "Pal…</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_sand                  &lt;int&gt; 41, 39, 27, 29, 48, 33, 30, 78, 23, 64, 54,…</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_min                    &lt;dbl&gt; 24.5, 33.3, 42.2, 31.3, 8.3, 28.8, 25.3, 11…</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_nitrogen              &lt;dbl&gt; 2.8, 1.3, 2.9, 3.6, 1.2, 1.9, 2.8, 0.6, 3.1…</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_range                  &lt;dbl&gt; 38.4, 41.2, 39.7, 49.8, 74.9, 45.0, 30.5, 2…</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cloud_cover_range          &lt;int&gt; 23, 27, 15, 17, 38, 27, 32, 11, 15, 12, 21,…</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_min               &lt;int&gt; 25, 37, 24, 29, 0, 60, 122, 1, 10, 12, 0, 0…</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="do">## $ growing_season_temperature &lt;dbl&gt; 12.65, 19.35, 11.55, 12.45, 26.45, 17.75, 2…</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_max              &lt;dbl&gt; 31.317, 24.498, 25.283, 17.237, 28.038, 22.…</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_min              &lt;dbl&gt; 5.209, 13.311, 1.587, 9.642, 19.102, 12.196…</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_range             &lt;int&gt; 37, 172, 63, 264, 226, 215, 303, 61, 245, 2…</span></span></code></pre></div>
<p>However, when the argument <code>response</code> is ignored, all categorical predictors are ignored.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">vi</span><span class="op">[</span>, <span class="va">selected_predictors_no_response</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Rows: 30,000</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Columns: 18</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_diversity             &lt;int&gt; 29, 24, 21, 25, 19, 30, 26, 20, 26, 22, 25,…</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="do">## $ humidity_range             &lt;dbl&gt; 15.57, 6.03, 14.44, 4.69, 33.18, 5.76, 3.99…</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_population         &lt;dbl&gt; 313973000, 1338612970, 33487208, 1338612970…</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="do">## $ country_gdp                &lt;dbl&gt; 15094000, 7973000, 1300000, 7973000, 15860,…</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_slope                 &lt;int&gt; 6, 2, 0, 10, 0, 10, 6, 0, 2, 0, 0, 1, 0, 1,…</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $ topo_elevation             &lt;int&gt; 1821, 143, 765, 1474, 378, 485, 604, 1159, …</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_range                  &lt;dbl&gt; 38.4, 41.2, 39.7, 49.8, 74.9, 45.0, 30.5, 2…</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_soc                   &lt;dbl&gt; 43.1, 14.6, 36.4, 34.9, 8.1, 20.8, 44.5, 4.…</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_clay                  &lt;int&gt; 20, 24, 28, 31, 27, 29, 40, 15, 26, 22, 23,…</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_sand                  &lt;int&gt; 41, 39, 27, 29, 48, 33, 30, 78, 23, 64, 54,…</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="do">## $ swi_min                    &lt;dbl&gt; 24.5, 33.3, 42.2, 31.3, 8.3, 28.8, 25.3, 11…</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="do">## $ soil_nitrogen              &lt;dbl&gt; 2.8, 1.3, 2.9, 3.6, 1.2, 1.9, 2.8, 0.6, 3.1…</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="do">## $ cloud_cover_range          &lt;int&gt; 23, 27, 15, 17, 38, 27, 32, 11, 15, 12, 21,…</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="do">## $ growing_season_temperature &lt;dbl&gt; 12.65, 19.35, 11.55, 12.45, 26.45, 17.75, 2…</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_min               &lt;int&gt; 25, 37, 24, 29, 0, 60, 122, 1, 10, 12, 0, 0…</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_max              &lt;dbl&gt; 31.317, 24.498, 25.283, 17.237, 28.038, 22.…</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a><span class="do">## $ solar_rad_min              &lt;dbl&gt; 5.209, 13.311, 1.587, 9.642, 19.102, 12.196…</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="do">## $ rainfall_range             &lt;int&gt; 37, 172, 63, 264, 226, 215, 303, 61, 245, 2…</span></span></code></pre></div>
<p>If there are categorical variables in a data frame, but there is no suitable <code>response</code> variable, then the function <code><a href="reference/cor_select.html">cor_select()</a></code> can handle the multicollinearity management via pairwise correlations, but at a MUCH higher computational cost, and with different results, as shown below.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tictoc</span><span class="fu">::</span><span class="fu">tic</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">selected_predictors_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cor_select.html">cor_select</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">tictoc</span><span class="fu">::</span><span class="fu">toc</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 0.674 sec elapsed</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tictoc</span><span class="fu">::</span><span class="fu">tic</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">selected_predictors_no_response</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cor_select.html">cor_select</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">tictoc</span><span class="fu">::</span><span class="fu">toc</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 108.86 sec elapsed</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_response</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "country_population"         "topo_elevation"            </span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "country_income"             "country_gdp"               </span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "topo_slope"                 "humidity_range"            </span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "soil_clay"                  "topo_diversity"            </span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "soil_sand"                  "cloud_cover_range"         </span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "region"                     "growing_season_temperature"</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "solar_rad_min"              "soil_soc"                  </span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "rainfall_min"               "swi_range"                 </span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "soil_nitrogen"              "rainfall_range"            </span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "swi_min"                    "subregion"                 </span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "biogeo_realm"               "cloud_cover_min"           </span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] "soil_type"                  "aridity_index"             </span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "solar_rad_max"</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_no_response</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "topo_elevation"             "topo_slope"                </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "country_population"         "topo_diversity"            </span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "soil_clay"                  "humidity_range"            </span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "soil_sand"                  "country_gdp"               </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "cloud_cover_range"          "country_income"            </span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "rainfall_min"               "soil_soc"                  </span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "swi_range"                  "growing_season_temperature"</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "rainfall_range"             "soil_nitrogen"             </span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "solar_rad_min"              "aridity_index"             </span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "cloud_cover_min"            "temperature_max"           </span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "region"                     "swi_min"                   </span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] "solar_rad_max"</span></span></code></pre></div>
<p>The variable selection results differ because the numeric representations of the categorical variables are rather different between the two options. When no <code>response</code> is provided, the function <code><a href="reference/cor_select.html">cor_select()</a></code> compares categorical predictors against numeric ones by encoding each categorical after each numeric, and compares pairs of categoricals using Cramer’s V, implemented in the function <code><a href="reference/cramer_v.html">cramer_v()</a></code>. Additionally, Cramer’s V values are not directly comparable with Pearson or Spearman correlation scores, and having them together in the same analysis might induce bias during the variable selection. Not using the <code>response</code> argument should always be the last option.</p>
</div>
<div class="section level3">
<h3 id="preference-order">Preference order<a class="anchor" aria-label="anchor" href="#preference-order"></a>
</h3>
<p>The argument <code>preference_order</code> gives the user some control on what predictors should be removed first and what predictors should be kept during the multicollinearity filtering. This argument accepts a vector of predictor names in the order of interest, or the result of the function <code><a href="reference/preference_order.html">preference_order()</a></code>, which allows to define preference order following a quantitative criteria.</p>
<div class="section level4">
<h4 id="manual-preference-order">Manual preference order<a class="anchor" aria-label="anchor" href="#manual-preference-order"></a>
</h4>
<p>Let’s start with the former option. Below, the argument <code>preference_order</code> names several predictors that are of importance for a hypothetical analysis. The <code>predictors</code> not in <code>preference_order</code> are ranked by the absolute sum of their correlations with other predictors during the pairwise correlation filtering, and by their VIF during the VIF-based filtering.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cor_select.html">cor_select</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  preference_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"soil_temperature_mean"</span>,</span>
<span>    <span class="st">"soil_temperature_max"</span>,</span>
<span>    <span class="st">"soil_type"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">selected_predictors</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "soil_temperature_mean" "soil_temperature_max"  "soil_type"            </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "country_population"    "topo_elevation"        "country_income"       </span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "country_gdp"           "topo_slope"            "humidity_range"       </span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "soil_clay"             "topo_diversity"        "soil_sand"            </span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "cloud_cover_range"     "region"                "soil_soc"             </span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "rainfall_min"          "swi_range"             "soil_nitrogen"        </span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "rainfall_range"        "subregion"             "biogeo_realm"         </span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [22] "aridity_index"         "solar_rad_max"</span></span></code></pre></div>
<p>Notice that in the output, two of the variables in <code>preference_order</code> are selected (“soil_temperature_mean” and “soil_type”), but one was removed (“soil_temperature_max”). This happens because at some point in the selection, the VIF of “soil_temperature_mean” and “soil_temperature_max” was higher than <code>max_vif</code>, and the one with lower preference was removed.</p>
</div>
<div class="section level4">
<h4 id="quantitative-preference-order">Quantitative preference order<a class="anchor" aria-label="anchor" href="#quantitative-preference-order"></a>
</h4>
<p>The function <code><a href="reference/preference_order.html">preference_order()</a></code> requires the <code>response</code> argument, and takes a function <code>f</code> that returns a value of association between the response and any predictor. This value is then located in the “preference” column of the function’s output.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">preference_rsquared</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/preference_order.html">preference_order</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  f <span class="op">=</span> <span class="va">f_rsquared</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">1</span> <span class="co">#requires package future and future.apply for more workers</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">preference_rsquared</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">##                     predictor   preference</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1            biogeo_ecoregion 0.8971347093</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2       growing_season_length 0.8076216576</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3                 koppen_zone 0.8050280970</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4          koppen_description 0.7903458680</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5                     soil_ph 0.7664428862</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6                    swi_mean 0.7286901614</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 7               humidity_mean 0.7141389404</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 8                koppen_group 0.6996959734</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 9                biogeo_biome 0.6515724588</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 10               country_name 0.6448346803</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 11           cloud_cover_mean 0.6338773126</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 12                  soil_type 0.6318025761</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 13              rainfall_mean 0.6005761078</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 14               humidity_max 0.5876622545</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 15       soil_temperature_max 0.5827628810</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 16                    swi_max 0.5813558512</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 17            cloud_cover_max 0.5758002449</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 18               humidity_min 0.5705720164</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 19    growing_season_rainfall 0.5697006759</span></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="do">## 20     soil_temperature_range 0.5523074848</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 21               biogeo_realm 0.5031101984</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 22              solar_rad_max 0.4905225950</span></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 23     evapotranspiration_max 0.4814731607</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 24               rainfall_max 0.4783927311</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 25              aridity_index 0.4506424015</span></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 26                  subregion 0.4469207404</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 27                  swi_range 0.4217411381</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 28            cloud_cover_min 0.4135724066</span></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 29   evapotranspiration_range 0.4042241481</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 30          temperature_range 0.3753489250</span></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 31             rainfall_range 0.3545446680</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a><span class="do">## 32    temperature_seasonality 0.2499469281</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a><span class="do">## 33               rainfall_min 0.2484813976</span></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a><span class="do">## 34                    swi_min 0.2406964836</span></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a><span class="do">## 35             solar_rad_mean 0.2140860965</span></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a><span class="do">## 36              soil_nitrogen 0.1872886789</span></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a><span class="do">## 37                  continent 0.1818717607</span></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a><span class="do">## 38            temperature_max 0.1589418736</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a><span class="do">## 39                     region 0.1505256024</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a><span class="do">## 40                   soil_soc 0.1493958026</span></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a><span class="do">## 41    evapotranspiration_mean 0.1455828419</span></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a><span class="do">## 42            solar_rad_range 0.1300751363</span></span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a><span class="do">## 43            temperature_min 0.1222051434</span></span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a><span class="do">## 44          cloud_cover_range 0.1216812855</span></span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a><span class="do">## 45       soil_temperature_min 0.1018471531</span></span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a><span class="do">## 46             topo_diversity 0.0925948262</span></span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a><span class="do">## 47                  soil_clay 0.0769366113</span></span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a><span class="do">## 48             humidity_range 0.0575393339</span></span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a><span class="do">## 49             country_income 0.0489946403</span></span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a><span class="do">## 50                  soil_sand 0.0427943817</span></span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a><span class="do">## 51             topo_elevation 0.0424759731</span></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a><span class="do">## 52 growing_season_temperature 0.0239161476</span></span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a><span class="do">## 53                 topo_slope 0.0203697134</span></span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a><span class="do">## 54      soil_temperature_mean 0.0170527033</span></span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a><span class="do">## 55           temperature_mean 0.0067479780</span></span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a><span class="do">## 56                  soil_silt 0.0059316757</span></span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a><span class="do">## 57        growing_degree_days 0.0047849144</span></span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a><span class="do">## 58     evapotranspiration_min 0.0009965488</span></span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a><span class="do">## 59                country_gdp 0.0008850479</span></span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a><span class="do">## 60              solar_rad_min 0.0005751350</span></span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a><span class="do">## 61         country_population 0.0002513147</span></span></code></pre></div>
<p>The result of <code><a href="reference/preference_order.html">preference_order()</a></code> can be plugged right away into the <code>preference_order</code> argument of collinear.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/collinear.html">collinear</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  preference_order <span class="op">=</span> <span class="va">preference_rsquared</span></span>
<span><span class="op">)</span></span>
<span><span class="va">selected_predictors</span></span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "biogeo_ecoregion"       "soil_temperature_range" "rainfall_min"          </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "solar_rad_mean"         "soil_nitrogen"          "continent"             </span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "soil_soc"               "cloud_cover_range"      "topo_diversity"        </span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "soil_clay"              "humidity_range"         "country_income"        </span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "soil_sand"              "topo_elevation"         "topo_slope"            </span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "country_gdp"            "country_population"</span></span></code></pre></div>
<p>This variable selection satisfies three conditions at once: maximum correlation between each predictor and the response, maximum pairwise correlation, and maximum VIF.</p>
<p>The <code>f</code> argument used by default is the function <code><a href="reference/f_rsquared.html">f_rsquared()</a></code>, that returns the R-squared between the response and any predictor.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/f_rsquared.html">f_rsquared</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="st">"growing_season_length"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  df <span class="op">=</span> <span class="va">vi</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.8076217</span></span></code></pre></div>
<p>There are two other <code>f</code> functions implemented:</p>
<ul>
<li>
<code>f_ga_deviance()</code>: returns the explained deviance of a univariate GAM model between the response and each predictor, fitted with the function <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam()</a></code>. Only if the R package <code>mgcv</code> is installed in the system.</li>
<li>
<code><a href="reference/f_rf_deviance.html">f_rf_deviance()</a></code>: returns the explained deviance of a univariate Random Forest model between the response and each predictor, fitted with the function <code><a href="https://rdrr.io/pkg/ranger/man/ranger.html" class="external-link">ranger::ranger()</a></code>. Only if the R package <code>ranger</code> is installed in the system.</li>
</ul>
<p>Custom functions created by the user are also accepted as input, as long as they have the <code>x</code>, <code>y</code>, and <code>df</code> arguments, and they return a single numeric value.</p>
<p>These can be run in parallel across predictors by increasing the value of the <code>workers</code> argument if the R packages <code>future</code> and <code>future.apply</code> are installed in the system.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="cor_select-and-vif_select">
<code>cor_select()</code> and <code>vif_select()</code>
<a class="anchor" aria-label="anchor" href="#cor_select-and-vif_select"></a>
</h2>
<p>The functions <code><a href="reference/cor_select.html">cor_select()</a></code> and <code><a href="reference/vif_select.html">vif_select()</a></code>, called within <code><a href="reference/collinear.html">collinear()</a></code>, perform the pairwise correlation filtering, and the VIF-based filtering. The main difference between them is that <code><a href="reference/cor_select.html">cor_select()</a></code> can handle categorical predictors even when the <code>response</code> is omitted, while <code><a href="reference/vif_select.html">vif_select()</a></code> ignores them entirely in such case.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_cor</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cor_select.html">cor_select</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  preference_order <span class="op">=</span> <span class="va">preference_rsquared</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">selected_predictors_vif</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/vif_select.html">vif_select</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span>
<span>  preference_order <span class="op">=</span> <span class="va">preference_rsquared</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_cor</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "biogeo_ecoregion"       "soil_temperature_range" "rainfall_min"          </span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "solar_rad_mean"         "soil_nitrogen"          "continent"             </span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "soil_soc"               "cloud_cover_range"      "topo_diversity"        </span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "soil_clay"              "humidity_range"         "country_income"        </span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "soil_sand"              "topo_elevation"         "topo_slope"            </span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "country_gdp"            "country_population"</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_predictors_vif</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "biogeo_ecoregion"   "soil_type"          "rainfall_mean"     </span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "biogeo_realm"       "solar_rad_max"      "subregion"         </span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] "soil_nitrogen"      "continent"          "soil_soc"          </span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "topo_diversity"     "soil_clay"          "country_income"    </span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "soil_sand"          "topo_slope"         "country_gdp"       </span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "country_population"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="target_encoding_lab">
<code>target_encoding_lab()</code><a class="anchor" aria-label="anchor" href="#target_encoding_lab"></a>
</h2>
<p>The function <code><a href="reference/target_encoding_lab.html">target_encoding_lab()</a></code> is used within all other functions in the package to encode categorical variables as numeric. It implements four target encoding methods:</p>
<ul>
<li>“mean” (in <code><a href="reference/target_encoding_methods.html">target_encoding_mean()</a></code>): replaces each category with the mean of the response across the category. White noise can be added to this option to increase data variability.</li>
<li>“rank” (in <code><a href="reference/target_encoding_methods.html">target_encoding_rank()</a></code>): replaces each category with the rank of the mean of the response across the category.</li>
<li>“rnorm” (in <code><a href="reference/target_encoding_methods.html">target_encoding_rnorm()</a></code>): replaces each value in a category with a number generated by <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">stats::rnorm()</a></code> from a normal distribution with the mean and the standard deviation of the response over the category.</li>
<li>“loo” (in <code><a href="reference/target_encoding_methods.html">target_encoding_loo()</a></code>): replaces each value in a category with the mean of the response across all the other cases within the category. White noise can be added to this option to increase data variability.</li>
</ul>
<p>The method “mean” is used as default throughout all functions in the package, but can be changed via the argument <code>encoding_method</code>.</p>
<p>Below we use all methods to generate different numeric encodings for the categorical variable “koppen_zone”.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/target_encoding_lab.html">target_encoding_lab</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="st">"koppen_zone"</span>,</span>
<span>  encoding_methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"mean"</span>,</span>
<span>    <span class="st">"rank"</span>,</span>
<span>    <span class="st">"rnorm"</span>,</span>
<span>    <span class="st">"loo"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  rnorm_sd_multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  white_noise <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Encoding the variables:</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="do">## koppen_zone</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_rank'</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_mean'</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_loo'</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_mean__white_noise_0.01'</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_loo__white_noise_0.01'</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_mean__white_noise_0.1'</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_loo__white_noise_0.1'</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_rnorm'</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_rnorm__sd_multiplier_0.01'</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a><span class="do">## New encoded predictor: 'koppen_zone__encoded_rnorm__sd_multiplier_0.1'</span></span></code></pre></div>
<p>The relationship between these encoded versions of “koppen_zone” and the response are shown below.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#get names of encoded variables</span></span>
<span><span class="va">koppen_zone_encoded</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span></span>
<span>  pattern <span class="op">=</span> <span class="st">"*__encoded*"</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>,</span>
<span>  value <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#record the user's graphical parameters</span></span>
<span><span class="va">user.par</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>no.readonly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#modify graphical parameters for the plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#plot target encoding</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>  X <span class="op">=</span> <span class="va">koppen_zone_encoded</span>,</span>
<span>  FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="va">df</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span>,</span>
<span>    y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span>
<span>    xlab <span class="op">=</span> <span class="va">x</span>,</span>
<span>    ylab <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>    cex <span class="op">=</span> <span class="fl">0.5</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">#reset the user's graphical parameters</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">user.par</span><span class="op">)</span></span></code></pre></div>
<p>The function implementing each method can be used directly as well. The example below shows the “mean” method with the option <code>replace = FALSE</code>, which replaces the categorical values with the numeric ones in the output data frame.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">vi</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vi_mean"</span>, <span class="st">"koppen_zone"</span><span class="op">)</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="do">##    vi_mean koppen_zone</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     0.38         BSk</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     0.53         Cfa</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     0.45         Dfc</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4     0.69         Cfb</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5     0.42          Aw</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6     0.68         Cfa</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 7     0.70          Af</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 8     0.26         BSh</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 9     0.55         Cwa</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 10    0.16         BWh</span></span></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/target_encoding_methods.html">target_encoding_mean</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">vi</span>,</span>
<span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span>
<span>  predictor <span class="op">=</span> <span class="st">"koppen_zone"</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vi_mean"</span>, <span class="st">"koppen_zone"</span><span class="op">)</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="do">##    vi_mean koppen_zone</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     0.38   0.2487370</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     0.53   0.5661689</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     0.45   0.4338492</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 4     0.69   0.5889908</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 5     0.42   0.5275241</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 6     0.68   0.5661689</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 7     0.70   0.6708994</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 8     0.26   0.3230049</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 9     0.55   0.5218936</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 10    0.16   0.1330452</span></span></code></pre></div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=collinear" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing collinear</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Blas Benito <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0001-5105-7232" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Blas Benito.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
