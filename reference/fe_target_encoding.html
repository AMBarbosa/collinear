<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Target encoding involves replacing the values of categorical variables with continuous values that are indicative of the response variable. There are several approaches to target encoding, including calculating the mean target value for each level of the categorical variable. Target encoding can be useful for improving the performance of machine learning models, but it can also introduce bias if the encoded values are not representative of the true underlying relationship between the categorical variables and the target.
This function identifies categorical variables in the input data frame, transforms them using a set of methods defined by the user, and returns the input data frame with the newly encoded variables.
The target encoding methods implemented in this function are:

rank: returns the order of the group as a integer, being the 1 the rank of the group with the lower mean of of the response variable. This method accepts the  noise argument, which adds white noise to the result to increase data variability and reduce leakage. The variables returned by this method are named with the suffix "__encoded_rank". This method is implemented in the function fe_target_encoding_rank().
mean: uses the mean value of the response over each group in the categorical variable. This option accepts noise. The variables returned by this method are named with the suffix "__encoded_mean".  This method is implemented in the function fe_target_encoding_mean().
rnorm: This method computes the mean and standard deviation of the response for each group of the categorical variable, and uses rnorm() to generate values taken from a normal distribution. The argument sd.width is used as a multiplier of the standard deviation to reduce the range of values produced by rnorm() for each group of the categorical predictor. The variables returned by this method are named with the suffix "__encoded_rnorm".  This method is implemented in the function fe_target_encoding_rnorm().
loo: This is the leave-one-out method. Each categorical value is replaced with the mean of the response variable across the other cases within the same group. The variables returned by this method are named with the suffix "__encoded_loo". This method is implemented in the function fe_target_encoding_loo().


The methods "mean" and "rank" support the noise argument. Values larger than zero in this argument add white noise to the target-encoded variables using stats::rnorm() via the function fe_target_encoding_noise()). The noise argument represents a fraction of the average differences between groups of the target-encoded variable. For example, if noise = 0.25 and the target-encoded variable has the unique values c(1, 2, 3), as it could be the case when using the "rank" method, then the average between-groups difference would be 1, and the range of the noise added to each row would go between 0 and 0.25
The method "rnorm" has the argument sd.width, which multiplies the standard deviation argument of the rnorm() function to limit the spread of the encoded values between groups.'><title>Target encoding of character and factor variables — fe_target_encoding • collinear</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Target encoding of character and factor variables — fe_target_encoding"><meta property="og:description" content='Target encoding involves replacing the values of categorical variables with continuous values that are indicative of the response variable. There are several approaches to target encoding, including calculating the mean target value for each level of the categorical variable. Target encoding can be useful for improving the performance of machine learning models, but it can also introduce bias if the encoded values are not representative of the true underlying relationship between the categorical variables and the target.
This function identifies categorical variables in the input data frame, transforms them using a set of methods defined by the user, and returns the input data frame with the newly encoded variables.
The target encoding methods implemented in this function are:

rank: returns the order of the group as a integer, being the 1 the rank of the group with the lower mean of of the response variable. This method accepts the  noise argument, which adds white noise to the result to increase data variability and reduce leakage. The variables returned by this method are named with the suffix "__encoded_rank". This method is implemented in the function fe_target_encoding_rank().
mean: uses the mean value of the response over each group in the categorical variable. This option accepts noise. The variables returned by this method are named with the suffix "__encoded_mean".  This method is implemented in the function fe_target_encoding_mean().
rnorm: This method computes the mean and standard deviation of the response for each group of the categorical variable, and uses rnorm() to generate values taken from a normal distribution. The argument sd.width is used as a multiplier of the standard deviation to reduce the range of values produced by rnorm() for each group of the categorical predictor. The variables returned by this method are named with the suffix "__encoded_rnorm".  This method is implemented in the function fe_target_encoding_rnorm().
loo: This is the leave-one-out method. Each categorical value is replaced with the mean of the response variable across the other cases within the same group. The variables returned by this method are named with the suffix "__encoded_loo". This method is implemented in the function fe_target_encoding_loo().


The methods "mean" and "rank" support the noise argument. Values larger than zero in this argument add white noise to the target-encoded variables using stats::rnorm() via the function fe_target_encoding_noise()). The noise argument represents a fraction of the average differences between groups of the target-encoded variable. For example, if noise = 0.25 and the target-encoded variable has the unique values c(1, 2, 3), as it could be the case when using the "rank" method, then the average between-groups difference would be 1, and the range of the noise added to each row would go between 0 and 0.25
The method "rnorm" has the argument sd.width, which multiplies the standard deviation argument of the rnorm() function to limit the spread of the encoded values between groups.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">collinear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Target encoding of character and factor variables</h1>
      
      <div class="d-none name"><code>fe_target_encoding.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Target encoding involves replacing the values of categorical variables with continuous values that are indicative of the response variable. There are several approaches to target encoding, including calculating the mean target value for each level of the categorical variable. Target encoding can be useful for improving the performance of machine learning models, but it can also introduce bias if the encoded values are not representative of the true underlying relationship between the categorical variables and the target.</p>
<p>This function identifies categorical variables in the input data frame, transforms them using a set of methods defined by the user, and returns the input data frame with the newly encoded variables.</p>
<p>The target encoding methods implemented in this function are:</p>
<ul><li><p><code>rank</code>: returns the order of the group as a integer, being the 1 the rank of the group with the lower mean of of the response variable. This method accepts the  <code>noise</code> argument, which adds white noise to the result to increase data variability and reduce leakage. The variables returned by this method are named with the suffix "__encoded_rank". This method is implemented in the function <code><a href="target_encoding_methods.html">fe_target_encoding_rank()</a></code>.</p></li>
<li><p><code>mean</code>: uses the mean value of the response over each group in the categorical variable. This option accepts <code>noise</code>. The variables returned by this method are named with the suffix "__encoded_mean".  This method is implemented in the function <code><a href="target_encoding_methods.html">fe_target_encoding_mean()</a></code>.</p></li>
<li><p><code>rnorm</code>: This method computes the mean and standard deviation of the response for each group of the categorical variable, and uses <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm()</a></code> to generate values taken from a normal distribution. The argument <code>sd.width</code> is used as a multiplier of the standard deviation to reduce the range of values produced by <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm()</a></code> for each group of the categorical predictor. The variables returned by this method are named with the suffix "__encoded_rnorm".  This method is implemented in the function <code><a href="target_encoding_methods.html">fe_target_encoding_rnorm()</a></code>.</p></li>
<li><p><code>loo</code>: This is the leave-one-out method. Each categorical value is replaced with the mean of the response variable across the other cases within the same group. The variables returned by this method are named with the suffix "__encoded_loo". This method is implemented in the function <code><a href="target_encoding_methods.html">fe_target_encoding_loo()</a></code>.</p></li>
</ul><p>The methods "mean" and "rank" support the <code>noise</code> argument. Values larger than zero in this argument add white noise to the target-encoded variables using <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">stats::rnorm()</a></code> via the function <code><a href="target_encoding_methods.html">fe_target_encoding_noise()</a></code>). The <code>noise</code> argument represents a fraction of the average differences between groups of the target-encoded variable. For example, if noise = 0.25 and the target-encoded variable has the unique values c(1, 2, 3), as it could be the case when using the "rank" method, then the average between-groups difference would be 1, and the range of the noise added to each row would go between 0 and 0.25</p>
<p>The method "rnorm" has the argument <code>sd.width</code>, which multiplies the standard deviation argument of the <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm()</a></code> function to limit the spread of the encoded values between groups.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fe_target_encoding</span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"rank"</span>, <span class="st">"loo"</span>, <span class="st">"rnorm"</span><span class="op">)</span>,</span>
<span>  sd.width <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  noise <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df</dt>
<dd><p>(required; data frame, tibble, or sf) A training data frame. Default: <code>NULL</code></p></dd>


<dt>response</dt>
<dd><p>(required; character string) Name of the response. Must be a column name of <code>df</code>. Default: <code>NULL</code></p></dd>


<dt>predictors</dt>
<dd><p>(required; character vector) Names of all the predictors in <code>df</code>. Only character and factor predictors are processed, but all are returned in the "df" slot of the function's output.  Default: <code>NULL</code></p></dd>


<dt>methods</dt>
<dd><p>(optional; character string). Name of the target encoding methods. Default: <code>c("mean", "rank", "loo", "rnorm")</code></p></dd>


<dt>sd.width</dt>
<dd><p>(optional; numeric vector) Only for the method "rnorm". Numeric vector with multiplicators of the standard deviation of each group in the categorical variable, in the range 0.01-1. Default: <code>0.1</code></p></dd>


<dt>seed</dt>
<dd><p>(optional; integer) Random seed to facilitate reproducibility. Default: <code>1</code></p></dd>


<dt>noise</dt>
<dd><p>(optional; numeric vector) Only in methods "mean" and "rank". Numeric vector with noise values in the range 0-1. Default: <code>0</code>.</p></dd>


<dt>replace</dt>
<dd><p>(optional; logical) Advanced option that changes the behavior of the function. Use only if you really know exactly what you need. If <code>TRUE</code>, only the first option in the <code>methods</code>, <code>noise</code>, and <code>sd.width</code> arguments is used, it replaces each categorical variable with its encoded version, and returns the input data frame with the encoded variables and without the original ones. Default: <code>FALSE</code></p></dd>


<dt>verbose</dt>
<dd><p>(optional; logical) If TRUE, messages and plots generated during the execution of the function are displayed. Default: <code>TRUE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If no target encoding is needed because all predictors are numeric, the function returns <code>df</code>.</p>


<p>Otherwise it returns a list of the class "fe_target_encoding" with the slots:</p><ul><li><p><code>data</code>: Input data frame, but with target-encoded character or factor columns.</p></li>
<li><p><code>leakage_test</code>: Data frame with the results of a linear model between the target-encoded variable and the response aimed to identify potential data leakage. It contains the following columns:</p><ul><li><p><code>encoded_predictor</code>: name of the target-encoded variable.</p></li>
<li><p><code>correlation_with_response</code>: R-squared resulting from <code><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test()</a></code> on the target-encoded variable and the response.</p></li>
<li><p><code>interpretation</code>: Interpretation of the test, with the values "Leakage", "Likely leakage", "Unlikely leakage", and "No leakage". If you find concerning results, you may either increase the value of the <code>noise</code> argument (if <code>method = "mean"</code>), or select the "rnorm" method.</p></li>
</ul></li>
</ul><p>If the advanced option <code>replace</code> is <code>TRUE</code>, then the input data frame is returned with the categorical variables replaced with their encoded versions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#loading example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">ecoregions</span>,</span></span>
<span class="r-in"><span>  <span class="va">ecoregions_continuous_response</span>,</span></span>
<span class="r-in"><span>  <span class="va">ecoregions_all_predictors</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#the dataframe ecoregions contains two categorical variables</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ecoregions</span><span class="op">$</span><span class="va">dominant_landcover</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ecoregions</span><span class="op">$</span><span class="va">primary_productivity</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#applying all methods for a continuous response</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">fe_target_encoding</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">ecoregions</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="va">ecoregions_continuous_response</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">ecoregions_all_predictors</span>,</span></span>
<span class="r-in"><span>  methods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"rank"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"rnorm"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"loo"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  sd.width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  noise <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#the output has several objects</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#names of the encoded predictors</span></span></span>
<span class="r-in"><span><span class="va">output</span><span class="op">$</span><span class="va">encoded_predictors</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#the data with the original and the encoded predictors</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">output</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#a leakage test assessing the correlation between the response and the encoded predictors</span></span></span>
<span class="r-in"><span><span class="va">output</span><span class="op">$</span><span class="va">leakage_test</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#plotting the transformations of "primary_productivity"</span></span></span>
<span class="r-in"><span><span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">output</span><span class="op">$</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>  cols <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      pattern <span class="op">=</span> <span class="st">"primary_productivity"</span>,</span></span>
<span class="r-in"><span>      x <span class="op">=</span> <span class="va">output</span><span class="op">$</span><span class="va">encoded_predictors</span>,</span></span>
<span class="r-in"><span>      value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">plant_richness</span>,</span></span>
<span class="r-in"><span>    <span class="va">primary_productivity</span>,</span></span>
<span class="r-in"><span>    <span class="va">name</span>,</span></span>
<span class="r-in"><span>    <span class="va">value</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">ggplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">aes</span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="va">plant_richness</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="va">value</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="va">primary_productivity</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">name</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu">labs</span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="st">"Response values"</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="st">"Encoded values"</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="st">"Original\ngroups"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Blas Benito.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

